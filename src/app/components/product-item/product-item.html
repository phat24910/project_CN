<nz-card
  class="product-card mb-4 border border-primary flex flex-col justify-between h-full text-center shadow-sm hover:shadow-lg transition-shadow duration-200 min-w-0 w-full max-w-xs sm:max-w-sm md:max-w-md mx-auto"
  [nzHoverable]="true"
  [nzCover]="coverTemplate">

  <ng-template #coverTemplate>
    <ng-container *ngIf="product.images?.length > 1; else singleImage">
      <nz-carousel nzAutoPlay [nzDots]="true" class="rounded-t-lg">
        <div nz-carousel-content *ngFor="let img of product.images">
          <img [src]="img" [alt]="product.title" class="product-img w-full h-36 sm:h-44 md:h-56 object-contain p-2 bg-white rounded-t-lg" />
        </div>
      </nz-carousel>
    </ng-container>
    <ng-template #singleImage>
      <img
        [src]="product.thumbnail || product.images[0]"
        [alt]="product.title"
        class="product-img w-full h-36 sm:h-44 md:h-56 object-contain p-2 bg-white rounded-t-lg"
      />
    </ng-template>
  </ng-template>

  <div class="px-2 sm:px-3 py-2 flex-1 flex flex-col justify-between">
    <h3 class="text-base font-semibold text-gray-800 text-center break-words leading-tight min-h-[3.5rem] px-2">
      {{ product.title }}
    </h3>
    <div class="flex justify-center items-center gap-2 mt-1 flex-wrap">
      <span class="text-orange-500 font-bold text-base sm:text-lg">{{ product.price | currency:'USD' }}</span>
      <span *ngIf="product.discountPercentage" class="text-x text-red-600 font-bold bg-red-50 rounded px-1"> - {{ product.discountPercentage }}%</span>
    </div>
  </div>

  <div class="text-xs sm:text-sm mt-1 flex flex-col items-center scale-90">
    <div class="flex items-center gap-1 mb-2">
      <div class="flex text-yellow-400">
        <span *ngFor="let star of getStars(product.rating)" nz-icon nzType="star" nzTheme="fill" class="text-sm"></span>
      </div>
      <span class="text-xs text-gray-500">({{ product.rating }})</span>
    </div>
    <div class="flex gap-2 w-full">
      <button (click)="onAddToCart()" 
              class="flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2 px-3 rounded-md text-xs font-medium transition-colors duration-200">
        {{ 'product.addToCart' | transloco }}
      </button>
      <button (click)="viewDetails(product.id)" 
              class="px-3 py-2 border border-gray-300 text-gray-700 rounded-md text-xs hover:border-orange-500 hover:text-orange-600 transition-colors duration-200">
        {{ 'product.viewDetails' | transloco }}
      </button>
    </div>
  </div>
</nz-card>


