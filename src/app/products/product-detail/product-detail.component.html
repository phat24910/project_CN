<nz-card *ngIf="product" class="max-w-4xl mx-auto p-6 shadow-lg rounded-2xl">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- Ảnh sản phẩm -->
    <div>
      <div class="relative">
        <img [src]="product.thumbnail" alt="{{ product.title }}" class="w-full rounded-xl border mb-4 shadow" />
        <span *ngIf="product.discountPercentage" class="absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded shadow z-10">
          -{{ product.discountPercentage }}%
        </span>
      </div>
      <div class="flex flex-wrap gap-2">
        <img *ngFor="let img of product.images" [src]="img" class="w-24 h-20 object-cover rounded border" />
      </div>
    </div>

    <!-- Thông tin chi tiết -->
    <div>
      <h2 class="text-3xl font-bold text-gray-800 mb-2">{{ product.title }}</h2>
      <div class="text-base text-gray-500 mb-2">SKU: {{ product.sku }}</div>
      <div class="mb-3 flex items-center gap-3">
        <span class="text-orange-500 text-2xl font-bold">{{ product.price | currency:'USD' }}</span>
        <span *ngIf="product.discountPercentage" class="text-red-600 font-semibold bg-red-100 px-2 py-1 rounded">-{{ product.discountPercentage }}%</span>
        <span class="text-xs text-gray-500">Kho: {{ product.stock }}</span>
      </div>
      <nz-rate [ngModel]="product.rating" [nzDisabled]="true" [nzAllowHalf]="true" class="mb-2"></nz-rate>
      <span class="text-gray-500 text-xs">({{ product.rating }} sao)</span>

      <nz-descriptions nzBordered [nzColumn]="1" class="mt-4 bg-white rounded-lg">
        <nz-descriptions-item nzTitle="Danh mục">{{ product.category }}</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Trọng lượng">{{ product.weight }} kg</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Kích thước">
          {{ product.dimensions.width }} × {{ product.dimensions.height }} × {{ product.dimensions.depth }} cm
        </nz-descriptions-item>
        <nz-descriptions-item nzTitle="Tình trạng">{{ product.availabilityStatus }}</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Bảo hành">{{ product.warrantyInformation }}</nz-descriptions-item>
        <!-- <nz-descriptions-item nzTitle="Vận chuyển">{{ product.shippingInformation }}</nz-descriptions-item> -->
        <!-- <nz-descriptions-item nzTitle="Mua tối thiểu">{{ product.minimumOrderQuantity }}</nz-descriptions-item> -->
        <nz-descriptions-item nzTitle="Hoàn trả">{{ product.returnPolicy }}</nz-descriptions-item>
      </nz-descriptions>

      <!-- <div *ngIf="product.tags?.length" class="mt-3">
        <span class="font-semibold">Tags:</span>
        <nz-tag *ngFor="let tag of product.tags" nzColor="blue" class="mx-1">{{ tag }}</nz-tag>
      </div>

      <div *ngIf="product.meta" class="mt-3">
        <nz-descriptions nzBordered [nzColumn]="1">
          <nz-descriptions-item nzTitle="Barcode">{{ product.meta.barcode }}</nz-descriptions-item>
          <nz-descriptions-item nzTitle="Tạo lúc">{{ product.meta.createdAt | date:'short' }}</nz-descriptions-item>
          <nz-descriptions-item nzTitle="Cập nhật">{{ product.meta.updatedAt | date:'short' }}</nz-descriptions-item>
        </nz-descriptions>
        <img *ngIf="product.meta.qrCode" [src]="product.meta.qrCode" alt="QR Code" class="h-24 mt-2 mx-auto" />
      </div> -->

      <div class="flex gap-3 mt-6">
        <button
          nz-button
          nzType="primary"
          (click)="buyNow()"
          class="text-white font-semibold border-primary"
          style="background-color: #ff6600 !important; border-color: #ff6600 !important; box-shadow: none;"
        >
          Mua ngay
        </button>
        <button
          nz-button
          nzType="default"
          (click)="addToCart()"
          style="border-color: #ff6600 !important; color: #ff6600 !important;"
        >
          Thêm vào giỏ
        </button>
      </div>
    </div>
  </div>

  <div class="mt-8">
    <h3 class="text-xl font-semibold mb-2">Đánh giá người dùng</h3>
    <div *ngIf="product.reviews?.length; else noReview">
      <div *ngFor="let r of product.reviews" class="border rounded p-3 mb-3 bg-gray-50">
        <div class="font-semibold">{{ r.reviewerName }} <span class="text-yellow-500">({{ r.rating }}/5)</span></div>
        <div class="italic text-xs text-gray-500">{{ r.date | date:'medium' }}</div>
        <div>{{ r.comment }}</div>
      </div>
    </div>
    <ng-template #noReview>
      <div class="text-gray-400 italic">Chưa có đánh giá nào.</div>
    </ng-template>
  </div>
</nz-card>

