<!-- <div class="cart-container" *ngIf="cartItems.length > 0; else emptyCart">
  <app-cart-item
    *ngFor="let item of cartItems"
    [item]="item"
    (increase)="increaseQuantity($event)"
    (decrease)="decreaseQuantity($event)"
    (remove)="removeItem($event)">
  </app-cart-item>

  <div class="cart-summary">
    <p><strong>Tổng tiền:</strong> {{ total | number:'1.2-2' }}$</p>

    <input [(ngModel)]="discountCode" placeholder="Nhập mã giảm giá (VD: giam10)">
    <button (click)="applyDiscount()">Áp dụng</button>

    <p *ngIf="discountPercent > 0">
      <strong>Giảm {{ discountPercent }}%:</strong> - {{ total * discountPercent / 100 | number:'1.2-2' }}$
    </p>

    <p><strong>Thành tiền:</strong> {{ totalAfterDiscount | number:'1.2-2' }}$</p>

    <button (click)="checkout()">Thanh toán</button>
    <button (click)="clearCart()">Xóa giỏ hàng</button>
  </div>
</div>

<ng-template #emptyCart>
  <p>Không có sản phẩm nào trong giỏ hàng.</p>
</ng-template> -->




<div class="cart-container" *ngIf="cartItems.length > 0; else emptyCart">
  <app-cart-item
    *ngFor="let item of cartItems"
    [item]="item"
    (increase)="increaseQuantity($event)"
    (decrease)="decreaseQuantity($event)"
    (remove)="removeItem($event)">
  </app-cart-item>

  <nz-card class="cart-summary">
    <div class="border border-primary rounded-lg p-4 bg-white shadow-sm flex flex-col gap-4">
      <div class="flex flex-col gap-2">
        <div class="flex items-center gap-2">
          <input
            type="text"
            nz-input
            [(ngModel)]="discountCode"
            placeholder="{{'cart.discountPlaceholder' | transloco}}"
            class="border-primary focus:border-primary focus:shadow-none rounded-md"
            style="min-width: 0; flex: 1;"
          />
          <button
            nz-button
            nzType="primary"
            (click)="applyDiscount()"
            class="bg-primary border-primary hover:bg-orange-600 focus:bg-orange-700 text-white font-semibold px-5"
            style="min-width: 100px;"
          >
            {{ 'cart.apply' | transloco }}
          </button>
        </div>
      </div>

      <div class="flex flex-col gap-1">
        <p *ngIf="discountPercent > 0" class="text-s">
          <strong>{{ 'cart.discountLabel' | transloco: { percent: discountPercent } }}</strong>
          – {{ total * discountPercent / 100 | number:'1.2-2' }} $
        </p>
        <p class="text-lg font-bold text-primary">
          <span>{{ 'cart.total' | transloco }}</span> {{ totalAfterDiscount | number:'1.2-2' }} $
        </p>
      </div>

      <div class="flex gap-2 mt-2">
        <button
          nz-button
          nzType="primary"
          (click)="checkout()"
          class="text-white font-semibold flex-1 border-primary"
          style="background-color: #ff6600 !important; border-color: #ff6600 !important; box-shadow: none;"
        >
          {{ 'cart.checkout' | transloco }}
        </button>
        <button
          nz-button
          nzDanger
          (click)="clearCart()"
          class="flex-1"
        >
          {{ 'cart.clearCart' | transloco }}
        </button>
      </div>

      <div class="flex flex-col items-center mt-4" *ngIf="showQrCode">
        <p class="mb-2 text-sm text-gray-500">{{ 'cart.qrTitle' | transloco }}:</p>
        <qr-code [value]="qrData" [size]="180" class="mx-auto mb-4"></qr-code>
        <button
        nz-button
        nzType="primary"
        (click)="confirmPayment()"
        class= "text-white font-semibold"
        >
          {{ 'cart.confirmPayment' | transloco }}
        </button>
      </div>

    </div>
  </nz-card>
</div>

<ng-template #emptyCart>
  <nz-empty nzNotFoundImage="simple"></nz-empty>
  <button nz-button nzType="primary" routerLink="/">{{ 'cart.empty.continueShopping' | transloco }}</button>
</ng-template>





