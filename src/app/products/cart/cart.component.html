<div class="cart-container" *ngIf="cartItems.length > 0; else emptyCart">
  <div class="cart-layout">
    <!-- Cột trái: Danh sách sản phẩm -->
    <div class="cart-items-section">
      <h2 class="section-title">{{ 'cart.items.title' | transloco }}</h2>
      <app-cart-item
        *ngFor="let item of cartItems"
        [item]="item"
        (increase)="increaseQuantity($event)"
        (decrease)="decreaseQuantity($event)"
        (remove)="removeItem($event)">
      </app-cart-item>
    </div>

    <!-- Cột phải: Phần tính tổng -->
    <div class="cart-summary-section">
      <nz-card class="cart-summary">
        <div class="summary-content">
          <h3 class="summary-title">{{ 'cart.summary.title' | transloco }}</h3>
          
          <!-- Mã giảm giá -->
          <div class="discount-section">
            <label class="discount-label">{{ 'cart.discountLabel' | transloco }}</label>
            <div class="discount-input-group">
              <input
                type="text"
                nz-input
                [(ngModel)]="discountCode"
                placeholder="{{'cart.discountPlaceholder' | transloco}}"
                class="discount-input"
              />
              <button
                nz-button
                nzType="primary"
                (click)="applyDiscount()"
                class="apply-discount-btn"
              >
                {{ 'cart.apply' | transloco }}
              </button>
            </div>
          </div>

          <!-- Chi tiết giá -->
          <div class="price-details">
            <div class="price-row">
              <span>{{ 'cart.subtotal' | transloco }}</span>
              <span class="price-value">{{ total | number:'1.2-2' }} $</span>
            </div>
            
            <div class="price-row" *ngIf="discountPercent > 0">
              <span>{{ 'cart.discount' | transloco }} ({{ discountPercent }}%)</span>
              <span class="price-value discount-value">-{{ total * discountPercent / 100 | number:'1.2-2' }} $</span>
            </div>
            
            <div class="price-row total-row">
              <span class="total-label">{{ 'cart.total' | transloco }}</span>
              <span class="total-value">{{ totalAfterDiscount | number:'1.2-2' }} $</span>
            </div>
          </div>

          <!-- Nút hành động -->
          <div class="action-buttons">
            <button
              nz-button
              nzType="primary"
              (click)="checkout()"
              class="checkout-btn"
            >
              {{ 'cart.checkout' | transloco }}
            </button>
            <button
              nz-button
              nzDanger
              (click)="clearCart()"
              class="clear-cart-btn"
            >
              {{ 'cart.clearCart' | transloco }}
            </button>
          </div>

          <!-- QR Code -->
          <div class="qr-section" *ngIf="showQrCode">
            <h4 class="qr-title">{{ 'cart.qrTitle' | transloco }}</h4>
            <qr-code [value]="qrData" [size]="150" class="qr-code"></qr-code>
            <button
              nz-button
              nzType="primary"
              (click)="confirmPayment()"
              class="confirm-payment-btn"
            >
              {{ 'cart.confirmPayment' | transloco }}
            </button>
          </div>
        </div>
      </nz-card>
    </div>
  </div>
</div>

<ng-template #emptyCart>
  <div class="empty-cart">
    <nz-empty nzNotFoundImage="simple"></nz-empty>
    <button nz-button nzType="primary" routerLink="/" class="continue-shopping-btn">
      {{ 'cart.empty.continueShopping' | transloco }}
    </button>
  </div>
</ng-template>





